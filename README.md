# ```Payment Page Sdk```

JS библиотека для открытия формы оплаты.

#  `Документация`

* [Подключение](#подключение)
    * [Подключение библиотеки в React](#подключение-библиотеки-в-React)
    * [Подключение библиотеки в html-файле](#подключение-библиотеки-в-html-файле)
* [Использование библиотеки](#использование-библиотеки)
    * [Минимальные условия для запуска](#минимальные-условия-для-запуска)
        * [Открытие формы оплаты в виде всплывающего окна](#открытие-формы-оплаты-в-виде-всплывающего-окна)
        * [Открытие формы оплаты в новой вкладке](#открытие-формы-оплаты-в-новой-вкладке)
        * [Открытие формы оплаты в той же вкладке](#открытие-формы-оплаты-в-той-же-вкладке)
    * [Расширенные параметры для запуска](#расширенные-параметры-для-запуска)
        * [Открытие в виде всплывающего окна](#открытие-в-виде-всплывающего-окна)
        * [Открытие в новой вкладке](#открытие-в-новой-вкладке)
        * [Открытие в той же вкладке](#открытие-в-той-же-вкладке)
* [Дополнительно](#дополнительно)
    * [Подключение стилей в React](#подключение-стилей-в-React)
    * [Подключение стилей в html-файле](#подключение-стилей-в-html-файле)

## `Подключение`

#### Подключение библиотеки в React:

```
import PaymentPageSdk from '@raiffeisen-ecom/payment-sdk';
```

#### Подключение библиотеки в html-файле:

для рабочего проекта подключите минимифицированный скрипт:

```
<script src="https://e-commerce.raiffeisen.ru/pay/sdk/payment.styled.min.js"></script>
```

для расширенной работы с кодом подключите обычный скрипт:

```
<script src="https://e-commerce.raiffeisen.ru/pay/sdk/payment.styled.js"></script>
```

## `Использование библиотеки`

Вся работа с библиотекой происходит через обращения к классу `PaymentPageSdk`

### `Минимальные условия для запуска:`

Обязательные парамеры:

* publicId (String) - идентификатор продавца;
* amount (Amount) - стоимость товара;

#### Открытие формы оплаты в виде всплывающего окна:

```
const paymentPage = new PaymentPageSdk('000001680211111-80211111');

paymentPage.openPopup({amount: 10.10})
        .then(resolve => {
                        console.log(resolve, "Спасибо");
                    })
        .catch(() => {
                        console.log("Неудача");
                    });
);
```

#### Открытие формы оплаты в новой вкладке:
 
```
const paymentPage = new PaymentPageSdk('000001680211111-80211111');

paymentPage.openWindow({amount: 10.10});
```

#### Открытие формы оплаты в той же вкладке:

```
const paymentPage = new PaymentPageSdk('000001680211111-80211111');

paymentPage.replace({amount: 10.10});
```

### `Расширенные параметры для запуска:`

Обязательные параметры:

* publicId (String) - идентификатор продавца;
* amount (Amount) - стоимость товара;

Необязательные параметры:

* orderId (String) - номер заказа;
* extra (String) - любые данные, которые продавец хочет получить при вызове колбэка;
* receipt (String) - параметр, который позволяет зарегистрировать чек покупки;
* style (String) - продавцу предоставляется возможность самому изменить стилизацию страницы;
* successUrl (String) - ссылка, на которую перейдёт покупатель, в случае успешной оплаты;
* failUrl (String) - ссылка, на которую перейдёт покупатель, в случае неудачной оплаты;
* comment (String) - описание товара, который приобретает покупатель.

#### Открытие в виде всплывающего окна:

```
const paymentPage = new PaymentPageSdk('000001680211111-80211111');
 
paymentPage.openPopup({
                        amount: 10.10,
                        orderId: '91700',
                        extra: '{"user": "userName"}',                      
                        receipt: '{"check": "check"}',
                        style: {
                            "button": {
                            "backgroundColor": "#ffc800"
                        },
                        comment: 'Тирольский пирог с яблоками, грушами, ветчиной, сыром, ананасами, 50см'
                    })
        .then(resolve => {
                        console.log(resolve, "Спасибо");
                    })
        .catch(() => {
                        console.log("Неудача");
                    });
);
```

#### Открытие в новой вкладке:

```
const paymentPage = new PaymentPageSdk('000001680211111-80211111');

paymentPage.openWindow({
                        amount: 10.10,
                        orderId: '91700',
                        extra: '{"user": "userName"}',                      
                        receipt: '{"check": "check"}',
                        style: '{
                            "button": {
                            "backgroundColor": "#ffc800"
                        }',
                        successUrl: 'http://fb.com',
                        failUrl: 'http://vc.ru',
                        comment: 'Тирольский пирог с яблоками, грушами, ветчиной, сыром, ананасами, 50см'
                    });
```

#### Открытие в той же вкладке:
 
То же самое, что и `открытие в новой вкладке`, только необходимо использовать метод `paymentPage.replace()`

Обратите внимание, что параметры successUrl и failUrl передаются только в методах openWindow() и replace(). Это позволяет продавцу, в зависимости от статуса оплаты (success или failed) перенаправить пользователя на нужную продавцу страницу. 

В методе openPopup(), в зависимости от статуса оплаты пользователю придёт уведомление об успешной/неуспешной оплате, поэтому делать redirect не нужно.

## `Дополнительно`

#### Подключение стилей в React:

подключение стилей напрямую:

```
import '@raiffeisen-ecom/payment-sdk/lib-style/index.css';
```

подключение стилей, которые зашиты в js-файл:

```
import PaymentPageSdk from '@raiffeisen-ecom/payment-sdk/lib-style';
```

#### Подключение стилей в html-файле:
 
подключение стилей напрямую:

```
<link rel="stylesheet" href="https://e-commerce.raiffeisen.ru/pay/sdk/payment.min.css">
```
 
подключение стилей, которые зашиты в js-файл:

```
<script src="https://e-commerce.raiffeisen.ru/pay/sdk/payment.min.js"></script>
```
